(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd415"],{8139:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{color:"#666"}},[i("div",{staticStyle:{margin:"20px 0"}},[i("div",{staticClass:"pd-10",staticStyle:{"font-size":"20px",color:"#3F5EFB",cursor:"pointer"}},[t._v(t._s(t.article.name))]),i("div",{staticStyle:{"font-size":"14px","margin-top":"10px"}},[i("i",{staticClass:"el-icon-user-solid"}),t._v(" "),i("span",[t._v(t._s(t.article.user))]),i("i",{staticClass:"el-icon-time",staticStyle:{"margin-left":"10px"}}),t._v(" "),i("span",[t._v(t._s(t.article.time))])])]),i("div",{staticStyle:{margin:"20px 0"}},[i("mavon-editor",{staticClass:"md",attrs:{value:t.article.content,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0}})],1),i("div",{staticStyle:{margin:"30px 0"}},[i("div",{staticStyle:{margin:"10px 0"}},[i("div",{staticStyle:{"border-bottom":"1px solid orangered",padding:"10px 0","font-size":"20px"}},[t._v("评论")]),i("div",{staticStyle:{padding:"10px 0"}},[i("el-input",{attrs:{size:"small",type:"textarea"},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}})],1),i("div",{staticClass:"pd-10",staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("comment")])],1)]),i("div",t._l(t.comments,(function(e){return i("div",{key:e.id,staticStyle:{"border-bottom":"1px solid #ccc",padding:"10px 0"}},[i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{width:"100px","text-align":"center"}},[i("el-image",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:e.avatarUrl}})],1),i("div",{staticStyle:{flex:"1","font-size":"14px",padding:"5px 0","line-height":"25px"}},[i("b",[t._v(t._s(e.nickname)+"：")]),i("span",[t._v(t._s(e.content))]),i("div",{staticStyle:{display:"flex","line-height":"20px","margin-top":"5px"}},[i("div",{staticStyle:{width:"200px"}},[i("i",{staticClass:"el-icon-time"}),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.time))])]),i("div",{staticStyle:{"text-align":"right",flex:"1"}},[i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text"},on:{click:function(i){return t.handleReply(e.id)}}},[t._v("reply")]),t.user.id===e.userId?i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.del(e.id)}}},[t._v("delete")]):t._e()],1)])])]),e.children.length?i("div",{staticStyle:{"padding-left":"200px"}},t._l(e.children,(function(e){return i("div",{key:e.id,staticStyle:{"background-color":"#f0f0f0",padding:"5px 20px"}},[i("div",{staticStyle:{"font-size":"14px",padding:"5px 0","line-height":"25px"}},[i("div",[e.pnickname?i("b",{staticStyle:{color:"#3a8ee6"}},[t._v("@"+t._s(e.pnickname))]):t._e()]),i("div",{staticStyle:{"padding-left":"5px"}},[i("b",[t._v(t._s(e.nickname)+"：")]),i("span",[t._v(t._s(e.content))])]),i("div",{staticStyle:{display:"flex","line-height":"20px","margin-top":"5px","padding-left":"5px"}},[i("div",{staticStyle:{width:"200px"}},[i("i",{staticClass:"el-icon-time"}),i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.time))])]),i("div",{staticStyle:{"text-align":"right",flex:"1"}},[i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text"},on:{click:function(i){return t.handleReply(e.id)}}},[t._v("reply")]),t.user.id===e.userId?i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){return t.del(e.id)}}},[t._v("delete")]):t._e()],1)])])])})),0):t._e()])})),0)]),i("el-dialog",{attrs:{title:"reply",visible:t.dialogFormVisible,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{"label-width":"80px",size:"small"}},[i("el-form-item",{attrs:{label:"reply content"}},[i("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.commentForm.contentReply,callback:function(e){t.$set(t.commentForm,"contentReply",e)},expression:"commentForm.contentReply"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("cancel")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.save}},[t._v("confirm")])],1)],1)],1)},s=[],n={name:"Article",data:function(){return{article:{},user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},comments:[],commentForm:{},id:this.$route.query.id,dialogFormVisible:!1}},created:function(){this.load(),this.loadComment()},methods:{load:function(){var t=this;this.request.get("/article/"+this.id).then((function(e){t.article=e.data}))},loadComment:function(){var t=this;this.request.get("/comment/tree/"+this.id).then((function(e){t.comments=e.data}))},save:function(){var t=this;this.user.id?(this.commentForm.articleId=this.id,this.commentForm.contentReply&&(this.commentForm.content=this.commentForm.contentReply),this.request.post("/comment",this.commentForm).then((function(e){"200"===e.code?(t.$message.success("successfully reply!"),t.commentForm={},t.loadComment(),t.dialogFormVisible=!1):t.$message.error(e.msg)}))):this.$message.warning("please log in first")},del:function(t){var e=this;this.request.delete("/comment/"+t).then((function(t){"200"===t.code?(e.$message.success("deleted"),e.loadComment()):e.$message.error("failed to delete")}))},handleReply:function(t){this.commentForm={pid:t},this.dialogFormVisible=!0}}},a=n,o=i("2877"),c=Object(o["a"])(a,l,s,!1,null,"aa7abbca",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0dd415.57c5c648.js.map