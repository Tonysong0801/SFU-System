{"remainingRequest":"D:\\pure-design-master\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\pure-design-master\\vue\\src\\views\\front\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\pure-design-master\\vue\\src\\views\\front\\Person.vue","mtime":1668873727000},{"path":"D:\\pure-design-master\\vue\\babel.config.js","mtime":1668873727000},{"path":"D:\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675498834325},{"path":"D:\\pure-design-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1675498834457},{"path":"D:\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675498834325},{"path":"D:\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1675498832014}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxwdXJlLWRlc2lnbi1tYXN0ZXJcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBzZXJ2ZXJJcCB9IGZyb20gIi4uLy4uLy4uL3B1YmxpYy9jb25maWciOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcnNvbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlcnZlcklwOiBzZXJ2ZXJJcCwKICAgICAgZm9ybToge30sCiAgICAgIHVzZXI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpIDoge30KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgX3RoaXMuZm9ybSA9IHJlczsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VXNlcjogZnVuY3Rpb24gZ2V0VXNlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5yZXF1ZXN0LmdldCgiL3VzZXIvdXNlcm5hbWUvIiArIF90aGlzMi51c2VyLnVzZXJuYW1lKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudC5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5yZXF1ZXN0LnBvc3QoIi91c2VyIiwgdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIik7IC8vIOinpuWPkeeItue6p+abtOaWsFVzZXLnmoTmlrnms5UKCgogICAgICAgICAgX3RoaXMzLiRlbWl0KCJyZWZyZXNoVXNlciIpOyAvLyDmm7TmlrDmtY/op4jlmajlrZjlgqjnmoTnlKjmiLfkv6Hmga8KCgogICAgICAgICAgX3RoaXMzLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgcmVzLnRva2VuID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKS50b2tlbjsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXMpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoIuS/neWtmOWksei0pSIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQXZhdGFyU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMpIHsKICAgICAgdGhpcy5mb3JtLmF2YXRhclVybCA9IHJlczsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,QAAA,QAAA,wBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,QADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,YAAA,CAAA,OAAA,CAAA,MAAA,IAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA,GAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AACA,SAAA,OAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,GAAA;AACA,KAHA;AAIA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,oBAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CADA;;AAAA;AAAA,+DACA,IADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,KAHA;AAIA,IAAA,IAJA,kBAIA;AAAA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA,EADA,CAGA;;;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,aAAA,EAJA,CAMA;;;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA,KAAA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA,WAHA;AAKA,SAZA,MAYA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA;AACA;AACA,OAhBA;AAiBA,KAtBA;AAuBA,IAAA,mBAvBA,+BAuBA,GAvBA,EAuBA;AACA,WAAA,IAAA,CAAA,SAAA,GAAA,GAAA;AACA;AAzBA;AAfA,CAAA","sourcesContent":["<template>\n  <el-card style=\"width: 500px;\">\n    <el-form label-width=\"80px\" size=\"small\">\n      <el-upload\n          class=\"avatar-uploader\"\n          :action=\"'http://' + serverIp +':9090/file/upload'\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n      >\n        <img v-if=\"form.avatarUrl\" :src=\"form.avatarUrl\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"邮箱\">\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电话\">\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"地址\">\n        <el-input type=\"textarea\" v-model=\"form.address\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nimport {serverIp} from \"../../../public/config\";\n\nexport default {\n  name: \"Person\",\n  data() {\n    return {\n      serverIp: serverIp,\n      form: {},\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n    }\n  },\n  created() {\n    this.getUser().then(res => {\n      console.log(res)\n      this.form = res\n    })\n  },\n  methods: {\n    async getUser() {\n      return (await this.request.get(\"/user/username/\" + this.user.username)).data\n    },\n    save() {\n      this.request.post(\"/user\", this.form).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"保存成功\")\n\n          // 触发父级更新User的方法\n          this.$emit(\"refreshUser\")\n\n          // 更新浏览器存储的用户信息\n          this.getUser().then(res => {\n            res.token = JSON.parse(localStorage.getItem(\"user\")).token\n            localStorage.setItem(\"user\", JSON.stringify(res))\n          })\n\n        } else {\n          this.$message.error(\"保存失败\")\n        }\n      })\n    },\n    handleAvatarSuccess(res) {\n      this.form.avatarUrl = res\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"],"sourceRoot":"src/views/front"}]}