{"remainingRequest":"D:\\online_market\\frontend\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\online_market\\frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\online_market\\frontend\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\online_market\\frontend\\vue\\src\\views\\front\\Person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\online_market\\frontend\\vue\\src\\views\\front\\Person.vue","mtime":1675561638304},{"path":"D:\\online_market\\frontend\\vue\\babel.config.js","mtime":1668873727000},{"path":"D:\\online_market\\frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675498834325},{"path":"D:\\online_market\\frontend\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1675498834457},{"path":"D:\\online_market\\frontend\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1675498834325},{"path":"D:\\online_market\\frontend\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1675498832014}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxvbmxpbmVfbWFya2V0XFxmcm9udGVuZFxcdnVlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNlcnZlcklwIH0gZnJvbSAiLi4vLi4vLi4vcHVibGljL2NvbmZpZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGVyc29uIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmVySXA6IHNlcnZlcklwLAogICAgICBmb3JtOiB7fSwKICAgICAgdXNlcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkgOiB7fQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICBfdGhpcy5mb3JtID0gcmVzOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRVc2VyOiBmdW5jdGlvbiBnZXRVc2VyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlcXVlc3QuZ2V0KCIvdXNlci91c2VybmFtZS8iICsgX3RoaXMyLnVzZXIudXNlcm5hbWUpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50LmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnJlcXVlc3QucG9zdCgiL3VzZXIiLCB0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKCJzdWNjZXNzZnVsbHkgc2F2ZWQiKTsgLy8g6Kem5Y+R54i257qn5pu05pawVXNlcueahOaWueazlQoKCiAgICAgICAgICBfdGhpczMuJGVtaXQoInJlZnJlc2hVc2VyIik7IC8vIOabtOaWsOa1j+iniOWZqOWtmOWCqOeahOeUqOaIt+S/oeaBrwoKCiAgICAgICAgICBfdGhpczMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICByZXMudG9rZW4gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpLnRva2VuOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KHJlcykpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5lcnJvcigiZmFpbGVkIHRvIHNhdmUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUF2YXRhclN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Y2Nlc3MocmVzKSB7CiAgICAgIHRoaXMuZm9ybS5hdmF0YXJVcmwgPSByZXM7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,QAAA,QAAA,wBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,QADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,YAAA,CAAA,OAAA,CAAA,MAAA,IAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA,GAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AACA,SAAA,OAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,GAAA;AACA,KAHA;AAIA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,oBAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CADA;;AAAA;AAAA,+DACA,IADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,KAHA;AAIA,IAAA,IAJA,kBAIA;AAAA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,oBAAA,EADA,CAGA;;;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,aAAA,EAJA,CAMA;;;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA,KAAA;AACA,YAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA;AACA,WAHA;AAKA,SAZA,MAYA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,gBAAA;AACA;AACA,OAhBA;AAiBA,KAtBA;AAuBA,IAAA,mBAvBA,+BAuBA,GAvBA,EAuBA;AACA,WAAA,IAAA,CAAA,SAAA,GAAA,GAAA;AACA;AAzBA;AAfA,CAAA","sourcesContent":["<template>\n  <el-card style=\"width: 500px;\">\n    <el-form label-width=\"80px\" size=\"small\">\n      <el-upload\n          class=\"avatar-uploader\"\n          :action=\"'http://' + serverIp +':9090/file/upload'\"\n          :show-file-list=\"false\"\n          :on-success=\"handleAvatarSuccess\"\n      >\n        <img v-if=\"form.avatarUrl\" :src=\"form.avatarUrl\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n\n      <el-form-item label=\"Username\">\n        <el-input v-model=\"form.username\" disabled autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Nickname\">\n        <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Email\">\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Phone\">\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"Address\">\n        <el-input type=\"textarea\" v-model=\"form.address\" autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\">confirm</el-button>\n      </el-form-item>\n    </el-form>\n  </el-card>\n</template>\n\n<script>\nimport {serverIp} from \"../../../public/config\";\n\nexport default {\n  name: \"Person\",\n  data() {\n    return {\n      serverIp: serverIp,\n      form: {},\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n    }\n  },\n  created() {\n    this.getUser().then(res => {\n      console.log(res)\n      this.form = res\n    })\n  },\n  methods: {\n    async getUser() {\n      return (await this.request.get(\"/user/username/\" + this.user.username)).data\n    },\n    save() {\n      this.request.post(\"/user\", this.form).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"successfully saved\")\n\n          // 触发父级更新User的方法\n          this.$emit(\"refreshUser\")\n\n          // 更新浏览器存储的用户信息\n          this.getUser().then(res => {\n            res.token = JSON.parse(localStorage.getItem(\"user\")).token\n            localStorage.setItem(\"user\", JSON.stringify(res))\n          })\n\n        } else {\n          this.$message.error(\"failed to save\")\n        }\n      })\n    },\n    handleAvatarSuccess(res) {\n      this.form.avatarUrl = res\n    }\n  }\n}\n</script>\n\n<style>\n.avatar-uploader {\n  text-align: center;\n  padding-bottom: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 138px;\n  height: 138px;\n  line-height: 138px;\n  text-align: center;\n}\n.avatar {\n  width: 138px;\n  height: 138px;\n  display: block;\n}\n</style>\n"],"sourceRoot":"src/views/front"}]}